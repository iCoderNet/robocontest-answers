{"code":"def gcd(a, b):\r\n    if b == 0: return a\r\n    return gcd(b, a % b)\r\ndef check(a,b):\r\n    if min(a,b) == 0: return max(a,b)\r\n    return gcd(a,b)\r\ndef solve(a,b,c,d):\r\n    x = 1\r\n    for i in range(b):\r\n        x *= a\r\n        b -= 1\r\n        if x >= c:\r\n           return check((x * pow(a,b,d) - c % d) % d, d)\r\na,b,c,d = map(int,input().split())\r\nprint(solve(a,b,c,d))","lang":2}