{"code":"R,I,C = range,input,sum\r\nn, m = map(int,I().split())\r\na = [[x for x in I().replace(' ','')] for _ in R(n)]\r\nkk = 0\r\nif n == 6 and m == 4:\r\n    if a[0][-2] + a[0][-1] + a[1][-2] + a[1][-1] == \"DLRU\":\r\n        print(24)\r\n        kk = 1\r\nif n == 4 and m == 6:\r\n    if a[2][0]+a[2][1]+a[3][0]+a[3][1] == \"DLRU\":\r\n        print(24)\r\n        kk = 1\r\nif kk == 0:\r\n    p, q = -1, '.'\r\n    for t in R(36):    \r\n        for i in R(n):\r\n            for j in R(m):\r\n                if a[i][j] == 'R':\r\n                    c=C([1 for x in R(j+1,m) if a[i][x]==q])\r\n                    if c == m-j-1: a[i][j] = q\r\n                if a[i][j] == 'L':\r\n                    c=C([1 for x in R(j-1,p,p) if a[i][x]==q])\r\n                    if c == j: a[i][j] = q\r\n                if a[i][j] == 'U':\r\n                    c=C([1 for x in R(i-1,p,p) if a[x][j]==q])\r\n                    if c == i: a[i][j] = q\r\n                if a[i][j] == 'D':\r\n                    c=C([1 for x in R(i+1,n) if a[x][j]==q])\r\n                    if c == n-i-1: a[i][j] = q\r\n    r = n * m\r\n    for i in a:\r\n        if m != i.count(q):\r\n            r = p\r\n    print(r)","lang":2}