{"code":"#include<bits\/stdc++.h>\r\nusing namespace std;\r\n\r\n#define mx 100001\r\n#define mod 1000000007\r\n\r\nint p[mx], dp[mx];\r\nvector < int > adj1[mx];\r\nvector < int > adj2[mx];\r\n\r\nint main(){\r\n\r\n    ios_base::sync_with_stdio(0);\r\n    cin.tie(0);\r\n    cout.tie(0);\r\n\r\n    int n, m;\r\n    cin >> n >> m;\r\n\r\n    dp[1]=1;\r\n    for(int i = 0; i < m; i++){\r\n        int u, v;\r\n        cin >> u >> v;\r\n        adj1[u].push_back(v);\r\n        adj2[v].push_back(u);\r\n        p[v]++;\r\n    }\r\n    queue < int > q;\r\n    for (int i = 1; i < n; i++){\r\n        if (p[i] == 0){\r\n            q.push(i);\r\n        }\r\n    }\r\n    \/*queue < int > q1 = q;\r\n    while (!q1.empty()) {\r\n        cout << q1.front() << \" \";\r\n        q1.pop();\r\n    }*\/\r\n    cout << endl;\r\n    while (!q.empty()){\r\n        int node = q.front();\r\n        q.pop();\r\n        for (auto v : adj1[node]){\r\n            p[v]--;\r\n            if (p[v] == 0) q.push(v);\r\n        }\r\n        for (auto u : adj2[node]) {\r\n            dp[node]=(dp[node] + dp[u]) % mod;\r\n        }\r\n    }\r\n    cout << dp[n] << endl;\r\n    return 0;\r\n}","lang":4}