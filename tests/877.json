{"code":"def main():\r\n    n, k = tuple(map(int, input().split()))\r\n\r\n    a = [set(range(n)) for _ in range(n)]\r\n\r\n    for i in range(k):\r\n        p = set()\r\n        for j in map(int, input().split()):\r\n            a[j-1] -= p\r\n            p.add(j-1)\r\n\r\n    sa = sorted(range(n), key=lambda i: len(a[i]))\r\n    maxx = [0] * n\r\n    res = 0\r\n    \r\n    for i in sa:\r\n        m = 1 + maxx[max(a[i], key=lambda e: maxx[e])] if a[i] else 0\r\n        maxx[i] = m\r\n        res = max(res, m)\r\n\r\n    print(res)\r\n\r\n\r\nmain()","lang":2}