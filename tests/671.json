{"code":"#include <bits\/stdc++.h>\r\nusing namespace std;\r\n#define mx 100001\r\nint p[mx], dp[mx];\r\nint f(int a, int b, int k)\r\n{\r\n    if (a == b) return k;\r\n    if (a > b)\r\n        return f(a\/2, b, k + 1);\r\n    return f(a, b\/2, k + 1);\r\n}\r\n\r\nint main()\r\n{\r\n    ios_base::sync_with_stdio( 0 );\r\n    cin.tie(NULL);\r\n    cout.tie(NULL);\r\n\r\n    int n, m;\r\n    cin >> n >> m;\r\n    vector<int>adj[n+1];\r\n    for (int i = 0; i < m; i++) {\r\n        int u, v;\r\n        cin >> u >> v;\r\n        adj[u].push_back(v);\r\n        adj[v].push_back(u);\r\n    }\r\n    if (n == 3)\r\n        return cout << 0, 0;\r\n    int node = -1;\r\n    for (int i = 1; i <= n; i++) {\r\n        if (adj[i].size() == 2) {\r\n            node = i;\r\n            break;\r\n        }\r\n    }\r\n\r\n    list<int>lt;\r\n    int k = 1;\r\n    lt.push_back(node);\r\n    p[node] = 1;\r\n    dp[node] = k;\r\n\r\n    while (!lt.empty()) {\r\n        int u = lt.front();\r\n        lt.pop_front();\r\n        k = 0;\r\n        for (auto x : adj[u]) {\r\n            if (p[x] == 0) {\r\n                p[x] = 1;\r\n                dp[x] = dp[u] * 2 + k;\r\n                k++;\r\n                lt.push_back(x);\r\n            }\r\n        }\r\n    }\r\n\r\n    int t;\r\n    cin >> t;\r\n    while (t--) {\r\n        int u, v;\r\n        cin >> u >> v;\r\n        cout << f(dp[u], dp[v], 0) - 1 << endl;\r\n    }\r\n    return 0;\r\n\r\n}","lang":4}