{"code":"#include <bits\/stdc++.h>\r\nusing namespace std;\r\n\r\nint main()\r\n{\r\n    ios::sync_with_stdio(0);\r\n    cin.tie(0);\r\n    cout.tie(0);\r\n    int n, m;\r\n    bool bol = true;\r\n    scanf(\"%d\", &n);\r\n\r\n    list<int>mylist;\r\n\r\n    int kitob = 1;\r\n\r\n    for (int i = 0; i < n; i++) {\r\n        scanf(\"%d\", &m);\r\n        if (m == 1) {\r\n            if (mylist.size() > 3)\r\n            mylist.pop_back();\r\n            mylist.push_back(kitob++);\r\n        }\r\n        else\r\n        if (m == 2) {\r\n            if (mylist.size() > 3)\r\n            mylist.pop_front();\r\n            mylist.push_front(kitob++);\r\n        }\r\n        else\r\n        if (m == 3 && mylist.size() > 0) {\r\n            cout << mylist.back() << ' ';\r\n            mylist.pop_back();\r\n            mylist.push_back(kitob++);\r\n            bol = false;\r\n        }\r\n        else\r\n        if (m == 4 && mylist.size() > 0) {\r\n            cout << mylist.front() << ' ';\r\n            mylist.pop_front();\r\n            mylist.push_front(kitob++);\r\n            bol = false;\r\n        }\r\n    }\r\n\r\n    if (bol) cout << \"EMPTY\";\r\n\r\n    return 0;\r\n}","lang":4}