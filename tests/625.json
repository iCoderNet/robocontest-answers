{"code":"def f(a, z, x1, y1, x2, y2, k1, k2, r):\r\n    R = range\r\n    for i in R(x1, y1, k1):\r\n        for j in R(i+r, y2, k2):\r\n            if a[z][i] == 0 and a[z][j] != 0:\r\n                a[z][i] = a[z][j]\r\n                a[z][j] = 0\r\n    return a\r\ndef g(a, z, x1, y1, x2, y2, k1, k2, r):\r\n    R = range\r\n    for i in R(x1, y1, k1):\r\n        for j in R(i+r, y2, k2):\r\n            if a[i][z] == 0 and a[j][z] != 0:\r\n                a[i][z] = a[j][z]\r\n                a[j][z] = 0\r\n    return a\r\nI, R = input, range\r\na = [[int(x) if x.isnumeric() else 0 for x in I()] for _ in R(4)]\r\nfor i in R(int(I())):\r\n    s, x, y = I().split()\r\n    x, y = int(x), int(y)\r\n    if s == 'R':\r\n        for i in R(4): a = f(a, i, 3, 0, 3, -1, -1, -1, -1)\r\n        for i in R(4):\r\n            key = 1\r\n            if a[i][2] == a[i][3]:\r\n                a[i][3] *= 2\r\n                a[i][2] = 0\r\n            else:\r\n                if a[i][1] == a[i][2]:\r\n                    a[i][2] *= 2\r\n                    a[i][1] = 0\r\n                else:\r\n                    if a[i][0] == a[i][1]:\r\n                        a[i][1] *= 2\r\n                        a[i][0] = 0\r\n            if key == 2:\r\n                if a[i][0] == a[i][1]:\r\n                    a[i][1] *= 2\r\n                    a[i][0] = 0\r\n        for i in R(4): a = f(a, i, 3, 0, 3, -1, -1, -1, -1)\r\n    if s == 'L':\r\n        for i in R(4): a = f(a, i, 0, 3, 0, 4, 1, 1, 1)\r\n        for i in R(4):\r\n            key = 1\r\n            if a[i][0] == a[i][1]:\r\n                a[i][0] *= 2\r\n                a[i][1] = 0\r\n                key = 2\r\n            else:\r\n                if a[i][1] == a[i][2]:\r\n                    a[i][1] *= 2\r\n                    a[i][2] = 0\r\n                else:\r\n                    if a[i][2] == a[i][3]:\r\n                        a[i][2] *= 2\r\n                        a[i][3] = 0\r\n            if key == 2:\r\n                if a[i][2] == a[i][3]:\r\n                    a[i][2] *= 2\r\n                    a[i][3] = 0\r\n        for i in R(4): a = f(a, i, 0, 3, 0, 4, 1, 1, 1)\r\n    if s == 'D':\r\n        for i in R(4): a = g(a, i, 3, 0, 3, -1, -1, -1, -1)\r\n        for i in R(4):\r\n            key = 1\r\n            if a[2][i] == a[3][i]:\r\n                a[3][i] *= 2\r\n                a[2][i] = 0\r\n            else:\r\n                if a[1][i] == a[2][i]:\r\n                    a[2][i] *= 2\r\n                    a[1][i] = 0\r\n                else:\r\n                    if a[0][i] == a[1][i]:\r\n                        a[1][i] *= 2\r\n                        a[0][i] = 0\r\n            if key == 2:\r\n                if a[0][i] == a[1][i]:\r\n                    a[1][i] *= 2\r\n                    a[0][i] = 0\r\n        for i in R(4): a = g(a, i, 3, 0, 3, -1, -1, -1, -1)\r\n    if s == 'U':\r\n        for i in R(4): a = g(a, i, 0, 3, 0, 4, 1, 1, 1)\r\n        for i in R(4):\r\n            key = 1\r\n            if a[0][i] == a[1][i]:\r\n                a[0][i] *= 2\r\n                a[1][i] = 0\r\n                key = 2\r\n            else:\r\n                if a[1][i] == a[2][i]:\r\n                    a[1][i] *= 2\r\n                    a[2][i] = 0\r\n                else:\r\n                    if a[2][i] == a[3][i]:\r\n                        a[2][i] *= 2\r\n                        a[3][i] = 0\r\n            if key == 2:\r\n                if a[2][i] == a[3][i]:\r\n                    a[2][i] *= 2\r\n                    a[3][i] = 0\r\n        for i in R(4): a = g(a, i, 0, 3, 0, 4, 1, 1, 1)\r\n    a[4-y][x-1] = 2\r\nprint(max([max(x) for x in a]))","lang":2}