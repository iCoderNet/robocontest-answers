{"code":"#include<bits\/stdc++.h>\r\n#define int long long\r\nusing namespace std;\r\nint n,r,k,x,max1;\r\nint a[5000001],b[5000001],c[5000001];\r\nvoid add(int l,int r,int x)\r\n{\r\n  b[l]+=x;b[r+1]-=x;\r\n}\r\nbool che(int x)\r\n{\r\n  int sum=0;\r\n  for(int i=1;i<=n;i++) b[i]=c[i];\r\n  for(int i=1;i<=n;i++)\r\n  {\r\n      b[i]+=b[i-1];\r\n    if(b[i]<x)\r\n    {\r\n       sum+=x-b[i],add(i,i+2*r,x-b[i]);if(sum>k)return 0;\r\n    }\r\n  }\r\n  return 1;\r\n}\r\nsigned main()\r\n{\r\n  cin>>n>>r>>k;\r\n  for(int i=1;i<=n;i++)\r\n  {\r\n    cin>>a[i];\r\n    c[i]+=a[i],c[i+r+1]-=a[i];\r\n    int z=i-r;\r\n    if(z<1) z=1;\r\n    c[z]+=a[i];c[i]-=a[i];\r\n    max1+=a[i]+k;\r\n  }\r\n  int l=0,rr=max1;\r\n  while(l<=rr)\r\n  {\r\n    int mid=(l+rr)>>1;\r\n    if(che(mid))l=mid+1;\r\n    else rr=mid-1;\r\n  }\r\n  cout<<rr;\r\n}","lang":4}