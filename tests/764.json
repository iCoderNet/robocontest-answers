{"code":"\/*\r\n\u2588\u2588    \u2588\u2588  \u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588   \u2588\u2588\r\n\u2588\u2588\u2588  \u2588\u2588\u2588  \u2588\u2588        \u2588\u2588     \u2588\u2588 \u2588\u2588\r\n\u2588\u2588 \u2588\u2588 \u2588\u2588  \u2588\u2588        \u2588\u2588      \u2588\u2588\r\n\u2588\u2588    \u2588\u2588  \u2588\u2588        \u2588\u2588      \u2588\u2588\r\n\r\n  \u2588\u2588\u2588\u2588  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588     \u2588\u2588      \u2588\u2588   \u2588\u2588  \u2588\u2588  \u2588\u2588  \u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588   \u2588\u2588\r\n \u2588\u2588        \u2588\u2588       \u2588\u2588\u2588\u2588     \u2588\u2588   \u2588\u2588  \u2588\u2588 \u2588\u2588   \u2588\u2588      \u2588\u2588   \u2588\u2588\r\n \u2588\u2588        \u2588\u2588      \u2588\u2588  \u2588\u2588    \u2588\u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588\u2588\u2588    \u2588\u2588\u2588\u2588    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\r\n \u2588\u2588        \u2588\u2588     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588   \u2588\u2588   \u2588\u2588  \u2588\u2588 \u2588\u2588   \u2588\u2588      \u2588\u2588   \u2588\u2588\r\n  \u2588\u2588\u2588\u2588     \u2588\u2588    \u2588\u2588\u2588    \u2588\u2588\u2588  \u2588\u2588   \u2588\u2588  \u2588\u2588  \u2588\u2588  \u2588\u2588\u2588\u2588\u2588\u2588  \u2588\u2588   \u2588\u2588\r\n*\/\r\n#include<bits\/stdc++.h>\r\nusing namespace std;\r\n\r\n#define int long long\r\n#define endl '\\n'\r\n#define lsum first\r\n#define sum second\r\n\r\n\r\nconst int N = 1LL<<19;\r\npair<int,int> tree[N];\r\nint arr[10000];\r\n\r\nint n;\r\nvoid upd(int k, int x){\r\n    k+=n;\r\n    tree[k] = {x, x}; k>>=1;\r\n    while(k>=1){\r\n        tree[k].sum = tree[2*k].sum + tree[2*k+1].sum;\r\n        tree[k].lsum = max(tree[2*k].lsum, tree[2*k].sum + tree[2*k+1].lsum);\r\n        k>>=1;\r\n    }\r\n}\r\nint qry(int a, int b){\r\n    a+=n, b+=n;\r\n    pair<int, int> x = {0, 0}, y = {0, 0};\r\n    while(a<=b){\r\n        if (a&1) \r\n            x = {max(x.lsum, x.sum + tree[a].lsum),  x.sum + tree[a++].sum};\r\n        if (~b&1) \r\n            y = {max(tree[b].lsum, tree[b].sum + y.lsum), y.sum + tree[b--].sum}; \r\n        a>>=1, b>>=1;\r\n    }\r\n    return max(x.lsum, x.sum + y.lsum);\r\n}\r\nsigned main(){\r\n    ios_base::sync_with_stdio(false);cin.tie(0);cout.tie(0);\r\n    #ifdef LOCAL\r\n    #endif\r\n    \r\n    int t; cin>>n>>t;\r\n    for (int i = 0; i < n; i++) {\r\n        int x; cin>>x;\r\n        upd(i, x);\r\n    }\r\n    while(t--) {\r\n        int x, a, b; cin>>x>>a>>b;\r\n        if (x == 1)\r\n            upd(a-1, b);\r\n        else\r\n            cout<<qry(a-1, b-1)<<endl;\r\n    }\r\n    \r\n}","lang":4}