{"code":"#include<bits\/stdc++.h>\r\nusing namespace std;\r\n\r\nint dp[8][8], key = 0;\r\nint cr[8][8], vis[64];\r\nvector<int>adj[64];\r\n\r\nvoid dfs(int u, int v, int k, int l) {\r\n    vis[u] = 1;\r\n    if (u == v && k == l)\r\n        key = 1;\r\n    for (auto x : adj[u]) {\r\n        if (vis[x] == 0) {\r\n            dfs(x, v, k, l+1);\r\n        }\r\n    }\r\n}\r\n\r\nvoid add(int u, int v) {\r\n    adj[u].push_back(v);\r\n    adj[v].push_back(u);\r\n}\r\n\r\nint main(){\r\n\r\n    string a, b;\r\n    cin >> a >> b;\r\n\r\n    int x = a[0] - 97;\r\n    int y = a[1] - 49;\r\n\r\n    int u = b[0] - 97;\r\n    int v = b[1] - 49;\r\n\r\n    queue<vector<int>>p;\r\n    p.push({u, v});\r\n    cr[u][v] = 1;\r\n    while (!p.empty())\r\n    {\r\n        vector<int>t = p.front();\r\n        p.pop();\r\n        int xx = t[0];\r\n        int yy = t[1];\r\n        for (int i = -2; i <= 2; i++) {\r\n            for (int j = -2; j <= 2; j++) {\r\n                if (i*i + j*j == 5) {\r\n                    if (xx+i>=0&&xx+i<8&&\r\n                        yy+j>=0&&yy+j<8&&\r\n                        cr[xx+i][yy+j]==0){\r\n                        p.push({xx+i,yy+j});\r\n                        add(8*xx+yy,8*(xx+i)+yy+j);\r\n                        cr[xx+i][yy+j] = 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    queue<vector<int>>q;\r\n    dp[x][y] = 1;\r\n    q.push({x, y});\r\n    int res = 0;\r\n    while (!q.empty())\r\n    {\r\n        vector<int>t = q.front();\r\n        int xx = t[0];\r\n        int yy = t[1];\r\n        q.pop();\r\n        for (int i = -2; i <= 2; i++) {\r\n            for (int j = -2; j <= 2; j++) {\r\n                if (i*i + j*j == 5) {\r\n                    if (xx+i>=0&&xx+i<8&&\r\n                        yy+j>=0&&yy+j<8&&\r\n                        dp[xx+i][yy+j]==0){\r\n                        q.push({xx+i,yy+j});\r\n                        dp[xx+i][yy+j] = dp[xx][yy] + 1;\r\n                        dfs(8*u+v,8*(xx+i)+yy+j,dp[xx][yy],0);\r\n                        if (key) {\r\n                            return cout << dp[xx][yy], 0;\r\n                        }\r\n                        for (int i = 0; i < 64; i++) {\r\n                            vis[i] = 0;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    cout << -1;\r\n    return 0;\r\n}","lang":4}