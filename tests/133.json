{"code":"#include <bits\/stdc++.h>\r\n\r\nusing namespace std;\r\n\r\nstruct Participant{\r\n    int number, from, power;\r\n};\r\n\r\nvoid print(Participant winners[], int k) {\r\n    for(int i = 0; i < k; i++) cout << \"{\" << winners[i].number << \" \" << winners[i].from << \" \" << winners[i].power << \"} \";\r\n    cout << \"\\n\";\r\n}\r\n\r\nint main() {\r\n    ios_base::sync_with_stdio(0);\r\n    cin.tie(0);\r\n    \r\n    int m,n;\r\n    cin >> m >> n;\r\n    Participant arr[n];\r\n    int city[m] = {0};\r\n    \r\n    for(int i = 0; i < n; i++) {\r\n        arr[i].number = 1+i;\r\n        cin >> arr[i].power;\r\n    }\r\n    \r\n    for(int i = 0; i < n; i++) {\r\n        cin >> arr[i].from;\r\n        ++city[arr[i].from-1];\r\n    }\r\n    \r\n    \r\n    sort(arr, arr+n, [](const Participant & a, const Participant & b){\r\n        if(a.from == b.from) return a.power < b.power;\r\n        else return a.from < b.from;\r\n    });\r\n    \r\n    \r\n    int sum = 0;\r\n    \r\n    Participant winners[m] = {0,0,0};\r\n    for(int i = 0; i < m; i++){\r\n        sum+=city[i];\r\n        winners[i] = arr[sum-1];\r\n    }\r\n    \r\n    Participant _1, _2, _3, _4;\r\n    for(;m>0;m\/=2){\r\n        int s = 0;\r\n        \r\n        if(m == 4){\r\n            if(winners[0].power < winners[1].power) {\r\n                _1 = winners[1];\r\n                _3 = winners[0];\r\n            } else {\r\n                _1 = winners[0];\r\n                _3 = winners[1];\r\n            }\r\n            \r\n            if(winners[2].power < winners[3].power) {\r\n                _2 = winners[3];\r\n                _4 = winners[2];\r\n            } else {\r\n                _2 = winners[2];\r\n                _4 = winners[3];\r\n            }\r\n            \r\n            if(_3.power < _4.power) _3 = _4;\r\n            if(_1.power < _2.power) swap(_1,_2);\r\n            \r\n            cout << _1.number << \" \" << _2.number << \" \" << _3.number << \"\\n\";\r\n            sort(arr, arr+n, [](const Participant & a, const Participant & b){return a.power < b.power;});\r\n            cout << arr[n-1].number << \" \" << arr[n-2].number << \" \" << arr[n-3].number;\r\n            return 0;\r\n        }\r\n        \r\n        for(int i = 0; i < m; i+=2){\r\n            if(winners[i].power > winners[i+1].power) winners[s] = winners[i];\r\n            else winners[s] = winners[i+1];\r\n            s++;\r\n        }\r\n    }\r\n    \r\n\r\n}","lang":4}