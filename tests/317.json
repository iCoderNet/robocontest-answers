{"code":"#include <bits\/stdc++.h>\r\nusing namespace std;\r\n\r\n#define f1 first\r\n#define s2 second\r\n\r\ntypedef long long ll;\r\n\r\nint const N=511;\r\nll a[N];\r\n\r\nvoid put(int l, int r, int x) {\r\n    for(int i = l; i <= r; i ++)\r\n        a[i] = x;\r\n}\r\nvoid add(int l, int r, int x) {\r\n    for(int i = l; i <= r; i ++)\r\n        a[i] += x;\r\n}\r\nint main(){\r\n  ios_base::sync_with_stdio(0);\r\n  cin.tie(0);cout.tie(0);\r\n  int n,q;\r\n  cin>>n>>q;\r\n  for (int i=1;i<=n;i++)\r\n    cin>>a[i];\r\n    vector < pair<pair<int, int>, pair<int, int> > > v(q);\r\n  for(int i=0;i<q;i++){\r\n    int t,l,r,x;\r\n    cin>>t>>l>>r>>x;\r\n    if(t==1){\r\n      if(x<0)t=1;\r\n      else t=4;\r\n    }\r\n    else{\r\n      if(x<0)t=2;\r\n      else t=3;}\r\n    v[i]=make_pair(make_pair(t,x),make_pair(l,r));\r\n  }\r\n  sort(v.begin(),v.end());\r\n  for(int i=0;i<q;i++){\r\n    if(v[i].f1.f1==1||v[i].f1.f1==4)\r\n      add(v[i].s2.f1,v[i].s2.s2,v[i].f1.s2);\r\n    else put(v[i].s2.f1,v[i].s2.s2,v[i].f1.s2);\r\n  }\r\n  for(int i=1;i<=n;i++){\r\n    cout<<a[i]<<' ';\r\n  }\r\n}","lang":4}